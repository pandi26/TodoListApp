<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TodoListApp"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="500"
        x:Class="TodoListApp.MainWindow"
        Title="To-Do List" Width="600" Height="500">
    
    <Window.Styles>
        <Style Selector="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Styles>

    <Grid Margin="20" RowDefinitions="Auto,Auto,*,Auto">
        
        <!-- Header -->
        <TextBlock Grid.Row="0" Text="My To-Do List" 
                   FontSize="28" FontWeight="Bold" 
                   Margin="0,0,0,20"/>
        
        <!-- Add Task Section -->
        <Border Grid.Row="1" BorderBrush="LightGray" 
                BorderThickness="1" CornerRadius="5" 
                Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Add New Task" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,10"/>
                <Grid ColumnDefinitions="*,Auto">
                    <TextBox Grid.Column="0" 
                             x:Name="TaskInput"
                             Watermark="Enter task description..."
                             VerticalAlignment="Center"/>
                    <Button Grid.Column="1" 
                            Content="Add Task"
                            Click="AddTask_Click"
                            Background="#4CAF50"
                            Foreground="White"/>
                </Grid>
            </StackPanel>
        </Border>
        
        <!-- Tasks List -->
        <Border Grid.Row="2" BorderBrush="LightGray" 
                BorderThickness="1" CornerRadius="5" 
                Padding="10">
            <ScrollViewer>
                <ItemsControl x:Name="TasksList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="local:TodoItem">
                            <Border BorderBrush="#E0E0E0" 
                                    BorderThickness="0,0,0,1" 
                                    Padding="10" Margin="0,5">
                                <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                                    <CheckBox Grid.Column="0" 
                                              IsChecked="{Binding IsCompleted}"
                                              VerticalAlignment="Center"
                                              Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" 
                                               Text="{Binding Description}"
                                               VerticalAlignment="Center"
                                               FontSize="14"
                                               TextWrapping="Wrap">
                                        <TextBlock.Styles>
                                            <Style Selector="TextBlock">
                                                <Style Selector="^[Tag=completed]">
                                                    <Setter Property="TextDecorations" Value="Strikethrough"/>
                                                    <Setter Property="Foreground" Value="Gray"/>
                                                </Style>
                                            </Style>
                                        </TextBlock.Styles>
                                    </TextBlock>
                                    <TextBlock Grid.Column="2"
                                               Text="{Binding CreatedAt, StringFormat='{}{0:MM/dd/yyyy}'}"
                                               Foreground="Gray"
                                               FontSize="12"
                                               VerticalAlignment="Center"
                                               Margin="10,0"/>
                                    <Button Grid.Column="3" 
                                            Content="Delete"
                                            Tag="{Binding}"
                                            Click="DeleteTask_Click"
                                            Background="#F44336"
                                            Foreground="White"
                                            Padding="8,4"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
        
        <!-- Stats Section -->
        <Border Grid.Row="3" Margin="0,15,0,0" 
                Background="#F5F5F5" 
                CornerRadius="5" 
                Padding="15">
            <Grid ColumnDefinitions="*,*,Auto">
                <TextBlock Grid.Column="0" 
                           x:Name="TotalTasksText"
                           Text="Total: 0"
                           FontWeight="SemiBold"/>
                <TextBlock Grid.Column="1" 
                           x:Name="CompletedTasksText"
                           Text="Completed: 0"
                           FontWeight="SemiBold"
                           Foreground="#4CAF50"/>
                <Button Grid.Column="2" 
                        Content="Clear Completed"
                        Click="ClearCompleted_Click"
                        Background="#FF9800"
                        Foreground="White"/>
            </Grid>
        </Border>
        
    </Grid>
</Window>